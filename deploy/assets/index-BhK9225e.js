import{r as d,o as k,v as h,f as x,j as w,k as e,l as u,D as A,x as r,A as p,B as N,y as E,C as U}from"./index-BfEDlx2e.js";import{b as C,_ as $,a as B}from"./pagination-page-BpupLFiI.js";import{_ as j}from"./button-primary-outline-DA8sDgzx.js";import{_ as b}from"./master-products-CGZ8hcHS.js";const O={class:"flex md:justify-center"},S={class:"sm:w-1/1 md:w-2/3 flex flex-col mb-10 space-y-10"},T={class:"flex justify-between"},L=e("div",{class:"flex space-x-3"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 16 16"},[e("path",{fill:"#A2422C",d:"M8 1a2.5 2.5 0 0 1 2.5 2.5V4h-5v-.5A2.5 2.5 0 0 1 8 1m3.5 3v-.5a3.5 3.5 0 1 0-7 0V4H1v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4z"})]),e("span",{class:"text-2xl font-bold text-red-800"},"กำหนดข้อมูลสินค้า")],-1),z={class:"flex space-x-3"},F={class:"rounded-xl mb-10 overflow-auto"},H={class:"flex justify-end py-5"},q={id:"modal-employee",class:"modal"},G={class:"modal-box w-11/12 max-w-3xl"},J={class:"font-bold text-lg"},K=e("hr",{class:"mt-2",style:{border:"1px solid #c2796a"}},null,-1),Q={class:"py-4 flex flex-wrap"},R={key:0,class:"basis-1/2 px-3 space-y-2"},W=e("label",null,"รหัสสินค้า",-1),X=e("br",null,null,-1),Y={class:"basis-1/2 px-3 space-y-2"},Z=e("label",null,"ชื่อสินค้า",-1),ee=e("br",null,null,-1),le={class:"basis-1/2 px-3 space-y-2"},te=e("label",{for:"productType"},"ประเภทสินค้า",-1),ae=e("br",null,null,-1),se=e("option",{value:"ซื้อ-ขาย"},"ซื้อ-ขาย",-1),oe=e("option",{value:"ฝาก"},"ฝาก",-1),ie=[se,oe],ne={class:"basis-1/2 px-3 space-y-2"},de=e("label",null,"ราคาขื้อเข้า",-1),ue=e("br",null,null,-1),ce={class:"basis-1/2 px-3 space-y-2"},re=e("label",null,"ราคาขายออก",-1),_e=e("br",null,null,-1),pe={class:"modal-action"},ge={__name:"index",setup(me){const i=d({page:1,limit:10,totalPage:0}),M=[{field:"specialID",label:"รหัสสินค้า",width:"20%"},{field:"name",label:"ชื่อสินค้า",width:"20%"},{field:"type",label:"ประเภทสินค้า",width:"20%"},{field:"price",label:"ราคาราคาขื้อเข้า",width:"20%"},{field:"priceOut",label:"ราคาขายออก",width:"20%"}],y=d([]),t=d({in_id:"",in_specialID:"",in_name:"",in_price:"",in_price_out:"",in_type:""}),c=d("add"),o=d(null),n=d({status:!1,title:"",body:""}),f=()=>{t.value={in_id:"",in_specialID:"",in_name:"",in_price:"",in_price_out:"",in_type:""}},D=s=>{console.log("onClickEdit--> ",s),o.value=s,g("edit")},g=s=>{c.value=s,s==="add"?f():(console.log("edit--> ",o.value),t.value={in_id:o.value.id,in_specialID:o.value.specialID,in_name:o.value.name,in_price:Number(o.value.price),in_price_out:Number(o.value.priceOut),in_type:o.value.type}),document.getElementById("modal-employee").showModal()},V=async()=>{if(console.log("***Submit***"),c.value==="add"){console.log("***Add***");const s={specialID:t.value.in_specialID,name:t.value.in_name,price:Number(t.value.in_price),priceOut:Number(t.value.in_price_out),type:t.value.in_type};console.log("body --> ",s),await b.create(s,async l=>{if(console.log("responseCreate --> ",l),l.statusCode===200)console.log("responseCreate --> ",l),n.value={status:!0,title:"สำเร็จ",body:"บันทึกข้อมูลสำเร็จ"},m(),await _();else{let a="";Array.isArray(l.message)?a=l.message.map(v=>`<li>${v}</li>`).join(""):a=l.message,n.value={status:!0,title:"กรุณาตรวจสอบ",body:a}}})}else{console.log("***Edit***");const s={name:t.value.in_name,price:Number(t.value.in_price),priceOut:Number(t.value.in_price_out),type:t.value.in_type};await b.update(s,o.value.id,async l=>{if(console.log("responseUpdate --> ",l),l.statusCode===200)console.log("responseUpdate --> ",l),n.value={status:!0,title:"สำเร็จ",body:"บันทึกข้อมูลสำเร็จ"},m(),await _();else{const a=l.message.map(v=>`<li>${v}</li>`);n.value={status:!0,title:"กรุณาตรวจสอบ",body:a.join("")}}})}},m=()=>{document.getElementById("modal-employee").close()},I=()=>{n.value.status=!1},_=async()=>{const s={page:i.value.page,limit:i.value.limit};await b.search(s,l=>{l.statusCode===200&&(console.log("response --> ",l),y.value=l.data,i.value.totalPage=l.metadata.totalPage)})},P=s=>{i.page=s,_()};return k(async()=>{h.commit("setStatusLoading",!0),await _(),f(),h.commit("setStatusLoading",!1)}),(s,l)=>(x(),w("div",null,[e("div",O,[e("div",S,[e("div",T,[L,e("div",z,[u(C,{label:"เพิ่มสินค้า",icon:"plus",onClick:l[0]||(l[0]=a=>g("add"))})])]),e("div",F,[u($,{columns:M,rows:y.value,rowEdit:!0,onOnClickEdit:D},null,8,["rows"])]),e("div",H,[u(B,{currentPage:i.value.page,"onUpdate:currentPage":[l[1]||(l[1]=a=>i.value.page=a),P],totalPages:i.value.totalPage,limit:i.value.limit},null,8,["currentPage","totalPages","limit"])])])]),e("dialog",q,[e("div",G,[e("h3",J,A(c.value==="add"?"เพิ่มสินค้า":"แก้ไขสินค้า"),1),K,e("div",Q,[c.value==="edit"?(x(),w("div",R,[W,X,r(e("input",{type:"text",class:"h-8 w-full focus:outline-red-400 rounded bg-red-100 px-3","onUpdate:modelValue":l[2]||(l[2]=a=>t.value.in_specialID=a),disabled:""},null,512),[[p,t.value.in_specialID]])])):N("",!0),e("div",Y,[Z,ee,r(e("input",{type:"text",class:"h-8 w-full focus:outline-red-400 rounded bg-red-100 px-3","onUpdate:modelValue":l[3]||(l[3]=a=>t.value.in_name=a)},null,512),[[p,t.value.in_name]])]),e("div",le,[te,ae,r(e("select",{name:"productType",id:"productType",class:"h-8 w-full focus:outline-red-400 rounded bg-red-100 px-3","onUpdate:modelValue":l[4]||(l[4]=a=>t.value.in_type=a)},ie,512),[[E,t.value.in_type]])]),e("div",ne,[de,ue,r(e("input",{type:"number",class:"h-8 w-full focus:outline-red-400 rounded bg-red-100 px-3","onUpdate:modelValue":l[5]||(l[5]=a=>t.value.in_price=a)},null,512),[[p,t.value.in_price]])]),e("div",ce,[re,_e,r(e("input",{type:"number",class:"h-8 w-full focus:outline-red-400 rounded bg-red-100 px-3","onUpdate:modelValue":l[6]||(l[6]=a=>t.value.in_price_out=a)},null,512),[[p,t.value.in_price_out]])])]),e("div",pe,[u(C,{label:c.value=="add"?"เพิ่ม":"แก้ไข",onClick:V},null,8,["label"]),u(j,{label:"ปิด",onClick:m})])])]),u(U,{titleMessage:n.value.title,bodyMessage:n.value.body,status:n.value.status,onCloseAlertModal:I},null,8,["titleMessage","bodyMessage","status"])]))}};export{ge as default};
