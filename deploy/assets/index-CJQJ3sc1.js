import{r as I,w as ue,o as be,v as A,f as m,j as h,k as n,x,y as X,F as K,z as ee,A as S,l as te,B as ge,C as _e,D as se}from"./index-BfEDlx2e.js";import{_ as ye,a as xe}from"./pagination-page-BpupLFiI.js";import{_ as we}from"./button-primary-outline-DA8sDgzx.js";import{_ as de}from"./deposit-import-DgzSnkOq.js";import{_ as De}from"./master-products-CGZ8hcHS.js";import{_ as $e}from"./master-supplier-DzAwSHkr.js";import{p as ce,d as pe,s as oe}from"./thai_provinces-BD6VM2Cq.js";import{c as fe,g as Me}from"./_commonjsHelpers-Cpj98o6Y.js";var ve={exports:{}};(function(q,ae){(function(Y,D){q.exports=D()})(fe,function(){var Y=1e3,D=6e4,T=36e5,w="millisecond",r="second",l="minute",k="hour",b="day",H="week",v="month",U="quarter",N="year",O="date",Z="Invalid Date",le=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,ie=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,ne={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var s=["th","st","nd","rd"],a=e%100;return"["+e+(s[(a-20)%10]||s[a]||s[0])+"]"}},E=function(e,s,a){var u=String(e);return!u||u.length>=s?e:""+Array(s+1-u.length).join(a)+e},re={s:E,z:function(e){var s=-e.utcOffset(),a=Math.abs(s),u=Math.floor(a/60),i=a%60;return(s<=0?"+":"-")+E(u,2,"0")+":"+E(i,2,"0")},m:function e(s,a){if(s.date()<a.date())return-e(a,s);var u=12*(a.year()-s.year())+(a.month()-s.month()),i=s.clone().add(u,v),d=a-i<0,c=s.clone().add(u+(d?-1:1),v);return+(-(u+(a-i)/(d?i-c:c-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:v,y:N,w:H,d:b,D:O,h:k,m:l,s:r,ms:w,Q:U}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return e===void 0}},_="en",P={};P[_]=ne;var J="$isDayjsObject",F=function(e){return e instanceof o||!(!e||!e[J])},W=function e(s,a,u){var i;if(!s)return _;if(typeof s=="string"){var d=s.toLowerCase();P[d]&&(i=d),a&&(P[d]=a,i=d);var c=s.split("-");if(!i&&c.length>1)return e(c[0])}else{var f=s.name;P[f]=s,i=f}return!u&&i&&(_=i),i||!u&&_},y=function(e,s){if(F(e))return e.clone();var a=typeof s=="object"?s:{};return a.date=e,a.args=arguments,new o(a)},p=re;p.l=W,p.i=F,p.w=function(e,s){return y(e,{locale:s.$L,utc:s.$u,x:s.$x,$offset:s.$offset})};var o=function(){function e(a){this.$L=W(a.locale,null,!0),this.parse(a),this.$x=this.$x||a.x||{},this[J]=!0}var s=e.prototype;return s.parse=function(a){this.$d=function(u){var i=u.date,d=u.utc;if(i===null)return new Date(NaN);if(p.u(i))return new Date;if(i instanceof Date)return new Date(i);if(typeof i=="string"&&!/Z$/i.test(i)){var c=i.match(le);if(c){var f=c[2]-1||0,g=(c[7]||"0").substring(0,3);return d?new Date(Date.UTC(c[1],f,c[3]||1,c[4]||0,c[5]||0,c[6]||0,g)):new Date(c[1],f,c[3]||1,c[4]||0,c[5]||0,c[6]||0,g)}}return new Date(i)}(a),this.init()},s.init=function(){var a=this.$d;this.$y=a.getFullYear(),this.$M=a.getMonth(),this.$D=a.getDate(),this.$W=a.getDay(),this.$H=a.getHours(),this.$m=a.getMinutes(),this.$s=a.getSeconds(),this.$ms=a.getMilliseconds()},s.$utils=function(){return p},s.isValid=function(){return this.$d.toString()!==Z},s.isSame=function(a,u){var i=y(a);return this.startOf(u)<=i&&i<=this.endOf(u)},s.isAfter=function(a,u){return y(a)<this.startOf(u)},s.isBefore=function(a,u){return this.endOf(u)<y(a)},s.$g=function(a,u,i){return p.u(a)?this[u]:this.set(i,a)},s.unix=function(){return Math.floor(this.valueOf()/1e3)},s.valueOf=function(){return this.$d.getTime()},s.startOf=function(a,u){var i=this,d=!!p.u(u)||u,c=p.p(a),f=function(j,C){var V=p.w(i.$u?Date.UTC(i.$y,C,j):new Date(i.$y,C,j),i);return d?V:V.endOf(b)},g=function(j,C){return p.w(i.toDate()[j].apply(i.toDate("s"),(d?[0,0,0,0]:[23,59,59,999]).slice(C)),i)},$=this.$W,M=this.$M,L=this.$D,B="set"+(this.$u?"UTC":"");switch(c){case N:return d?f(1,0):f(31,11);case v:return d?f(1,M):f(0,M+1);case H:var z=this.$locale().weekStart||0,Q=($<z?$+7:$)-z;return f(d?L-Q:L+(6-Q),M);case b:case O:return g(B+"Hours",0);case k:return g(B+"Minutes",1);case l:return g(B+"Seconds",2);case r:return g(B+"Milliseconds",3);default:return this.clone()}},s.endOf=function(a){return this.startOf(a,!1)},s.$set=function(a,u){var i,d=p.p(a),c="set"+(this.$u?"UTC":""),f=(i={},i[b]=c+"Date",i[O]=c+"Date",i[v]=c+"Month",i[N]=c+"FullYear",i[k]=c+"Hours",i[l]=c+"Minutes",i[r]=c+"Seconds",i[w]=c+"Milliseconds",i)[d],g=d===b?this.$D+(u-this.$W):u;if(d===v||d===N){var $=this.clone().set(O,1);$.$d[f](g),$.init(),this.$d=$.set(O,Math.min(this.$D,$.daysInMonth())).$d}else f&&this.$d[f](g);return this.init(),this},s.set=function(a,u){return this.clone().$set(a,u)},s.get=function(a){return this[p.p(a)]()},s.add=function(a,u){var i,d=this;a=Number(a);var c=p.p(u),f=function(M){var L=y(d);return p.w(L.date(L.date()+Math.round(M*a)),d)};if(c===v)return this.set(v,this.$M+a);if(c===N)return this.set(N,this.$y+a);if(c===b)return f(1);if(c===H)return f(7);var g=(i={},i[l]=D,i[k]=T,i[r]=Y,i)[c]||1,$=this.$d.getTime()+a*g;return p.w($,this)},s.subtract=function(a,u){return this.add(-1*a,u)},s.format=function(a){var u=this,i=this.$locale();if(!this.isValid())return i.invalidDate||Z;var d=a||"YYYY-MM-DDTHH:mm:ssZ",c=p.z(this),f=this.$H,g=this.$m,$=this.$M,M=i.weekdays,L=i.months,B=i.meridiem,z=function(C,V,G,R){return C&&(C[V]||C(u,d))||G[V].slice(0,R)},Q=function(C){return p.s(f%12||12,C,"0")},j=B||function(C,V,G){var R=C<12?"AM":"PM";return G?R.toLowerCase():R};return d.replace(ie,function(C,V){return V||function(G){switch(G){case"YY":return String(u.$y).slice(-2);case"YYYY":return p.s(u.$y,4,"0");case"M":return $+1;case"MM":return p.s($+1,2,"0");case"MMM":return z(i.monthsShort,$,L,3);case"MMMM":return z(L,$);case"D":return u.$D;case"DD":return p.s(u.$D,2,"0");case"d":return String(u.$W);case"dd":return z(i.weekdaysMin,u.$W,M,2);case"ddd":return z(i.weekdaysShort,u.$W,M,3);case"dddd":return M[u.$W];case"H":return String(f);case"HH":return p.s(f,2,"0");case"h":return Q(1);case"hh":return Q(2);case"a":return j(f,g,!0);case"A":return j(f,g,!1);case"m":return String(g);case"mm":return p.s(g,2,"0");case"s":return String(u.$s);case"ss":return p.s(u.$s,2,"0");case"SSS":return p.s(u.$ms,3,"0");case"Z":return c}return null}(C)||c.replace(":","")})},s.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},s.diff=function(a,u,i){var d,c=this,f=p.p(u),g=y(a),$=(g.utcOffset()-this.utcOffset())*D,M=this-g,L=function(){return p.m(c,g)};switch(f){case N:d=L()/12;break;case v:d=L();break;case U:d=L()/3;break;case H:d=(M-$)/6048e5;break;case b:d=(M-$)/864e5;break;case k:d=M/T;break;case l:d=M/D;break;case r:d=M/Y;break;default:d=M}return i?d:p.a(d)},s.daysInMonth=function(){return this.endOf(v).$D},s.$locale=function(){return P[this.$L]},s.locale=function(a,u){if(!a)return this.$L;var i=this.clone(),d=W(a,u,!0);return d&&(i.$L=d),i},s.clone=function(){return p.w(this.$d,this)},s.toDate=function(){return new Date(this.valueOf())},s.toJSON=function(){return this.isValid()?this.toISOString():null},s.toISOString=function(){return this.$d.toISOString()},s.toString=function(){return this.$d.toUTCString()},e}(),t=o.prototype;return y.prototype=t,[["$ms",w],["$s",r],["$m",l],["$H",k],["$W",b],["$M",v],["$y",N],["$D",O]].forEach(function(e){t[e[1]]=function(s){return this.$g(s,e[0],e[1])}}),y.extend=function(e,s){return e.$i||(e(s,o,y),e.$i=!0),y},y.locale=W,y.isDayjs=F,y.unix=function(e){return y(1e3*e)},y.en=P[_],y.Ls=P,y.p={},y})})(ve);var me=ve.exports;const he=Me(me);var Se={exports:{}};(function(q,ae){(function(Y,D){q.exports=D(me)})(fe,function(Y){function D(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}var T=D(Y),w={name:"th",weekdays:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์".split("_"),weekdaysShort:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์".split("_"),weekdaysMin:"อา._จ._อ._พ._พฤ._ศ._ส.".split("_"),months:"มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม".split("_"),monthsShort:"ม.ค._ก.พ._มี.ค._เม.ย._พ.ค._มิ.ย._ก.ค._ส.ค._ก.ย._ต.ค._พ.ย._ธ.ค.".split("_"),formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY เวลา H:mm",LLLL:"วันddddที่ D MMMM YYYY เวลา H:mm"},relativeTime:{future:"อีก %s",past:"%sที่แล้ว",s:"ไม่กี่วินาที",m:"1 นาที",mm:"%d นาที",h:"1 ชั่วโมง",hh:"%d ชั่วโมง",d:"1 วัน",dd:"%d วัน",M:"1 เดือน",MM:"%d เดือน",y:"1 ปี",yy:"%d ปี"},ordinal:function(r){return r+"."}};return T.default.locale(w,null,!0),w})})(Se);he.locale("th");const Ce=q=>he(q,"DD/MM/YYYY").add(543,"year").format("DD/MM/YYYY"),Ne={class:"flex md:justify-center"},Le={class:"sm:w-1/1 md:w-2/3 flex flex-col mb-10 space-y-10"},ke={class:"space-y-3"},Ye=n("div",{class:"flex space-x-3"},[n("svg",{width:"33",height:"33",viewBox:"0 0 33 33",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.995833 19.0804C1.41009 21.1629 3.14804 22.9008 6.6239 26.3766C10.0998 29.8525 11.8377 31.5906 13.9203 32.0048C14.8219 32.1842 15.75 32.1842 16.6515 32.0048C18.7342 31.5906 20.4721 29.8527 23.948 26.3766L28.057 22.2678C30.2972 20.0276 31.4172 18.9075 31.949 17.47C32.4806 16.0327 32.3592 14.4533 32.1163 11.2945L31.8328 7.6103C31.6132 4.75558 31.5034 3.32821 30.5878 2.4127C29.6724 1.49719 28.2449 1.38739 25.3903 1.16778L21.7061 0.884389C18.5473 0.641407 16.9679 0.519916 15.5305 1.05165C14.0931 1.58337 12.973 2.70348 10.7328 4.94365L6.6239 9.05258C3.14804 12.5285 1.41009 14.2664 0.995833 16.349C0.816493 17.2506 0.816493 18.1788 0.995833 19.0804ZM20.2357 12.7647C21.6025 14.1316 23.8185 14.1316 25.1854 12.7647C26.5522 11.3979 26.5522 9.18182 25.1854 7.81498C23.8185 6.44816 21.6025 6.44816 20.2357 7.81498C18.8688 9.18182 18.8688 11.3979 20.2357 12.7647Z",fill:"#A2422C"})]),n("span",{class:"text-2xl font-bold text-red-800"},"รับสินค้า (ฝากเก็บ)")],-1),Pe={class:"w-full bg-white rounded-xl py-3"},Ae={class:"flex justify-between px-6"},Oe=n("span",{class:"text-lg font-semibold text-red-800"},"ข้อมูลสินค้า",-1),Ue=n("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 512 512"},[n("path",{d:"M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm0 336.1c-70.7 0-128-57.3-128-128.1s57.3-128.1 128-128.1v-37c0-6.4 7.1-10.2 12.4-6.7l72.9 52.6c4.9 3.3 4.7 10.6-.4 13.6L268 196.7c-5.3 3.1-12-.8-12-6.9v-41.9c-60.3 0-109.2 49.7-108.1 110.2 1.1 59.1 50.3 106.7 109.5 106 55.9-.7 101.8-43.7 106.3-99 .4-5.2 4.7-9.1 9.9-9.1 5.8 0 10.4 4.9 9.9 10.7-5.4 66-60.4 117.4-127.5 117.4z",fill:"#A2422C"})],-1),Ve=n("span",{class:"text-sm font-bold text-red-800"},"ล้างฟอร์ม",-1),Ie=[Ue,Ve],ze=n("hr",{class:"mt-2 mx-6",style:{border:"1px solid #c2796a"}},null,-1),je={class:"px-12 flex flex-wrap pt-10"},qe={class:"lg:basis-1/2 basis-full space-x-3 flex items-center px-6 mb-6"},Te=n("span",{class:"w-1/4 text-red-800 font-semibold"},"ชื่อสินค้า",-1),He=["value"],Fe={class:"lg:basis-1/2 basis-full space-x-3 flex items-center px-6 mb-6"},We=n("span",{class:"w-1/4 text-red-800 font-semibold"},"ประเภทสินค้า",-1),Be={class:"lg:basis-1/2 basis-full space-x-3 flex items-center px-6 mb-6"},Ze=n("span",{class:"w-1/4 text-red-800 font-semibold"},"ระยะเวลาการฝาก",-1),Ee={class:"lg:basis-1/2 basis-full space-x-3 flex items-center px-6 mb-6"},Je=n("span",{class:"w-1/4 text-red-800 font-semibold"},"ราคาค่าฝาก",-1),Qe=n("span",{class:"w-1/4 text-red-800 font-semibold"},"บาท",-1),Ge={class:"lg:basis-1/2 basis-full space-x-3 flex items-center px-6 mb-6"},Ke=n("span",{class:"w-1/4 text-red-800 font-semibold"},"ปริมาณ",-1),Re=n("span",{class:"w-1/4 text-red-800 font-semibold"},"กิโลกรัม",-1),Xe={class:"lg:basis-1/2 basis-full space-x-3 flex items-center px-6 mb-6"},et=n("span",{class:"w-1/4 text-red-800 font-semibold"},"จำนวนคงเหลือ",-1),tt=n("span",{class:"w-1/4 text-red-800 font-semibold"},"กิโลกรัม",-1),st={class:"w-full bg-white rounded-xl py-3"},at=n("div",{class:"px-6"},[n("span",{class:"text-lg font-semibold text-red-800"},"ข้อมูลผู้จัดจำหน่าย")],-1),lt=n("hr",{class:"mt-2 mx-6",style:{border:"1px solid #c2796a"}},null,-1),it={class:"px-12 flex flex-wrap pt-10"},nt={class:"lg:basis-1/2 basis-full space-x-3 flex items-center px-6 mb-6"},rt=n("label",{class:"w-1/4 text-red-800 font-semibold"},"เบอร์โทร",-1),ot={class:"lg:basis-1/2 basis-full space-x-3 flex items-center px-6 mb-6"},ut=n("label",{class:"w-1/4 text-red-800 font-semibold"},"ชื่อ",-1),dt={class:"lg:basis-1/2 basis-full space-x-3 flex items-center px-6 mb-6"},ct=n("label",{class:"w-1/4 text-red-800 font-semibold"},"สกุล",-1),pt={class:"lg:basis-1/2 basis-full space-x-3 flex items-center px-6 mb-6"},ft=n("label",{class:"w-1/4 text-red-800 font-semibold"},"ที่อยู่",-1),vt={class:"lg:basis-1/2 basis-full space-x-3 flex items-center px-6 mb-6"},mt=n("label",{class:"w-1/4 text-red-800 font-semibold"},"จังหวัด",-1),ht=n("option",{value:""},"------เลือก------",-1),bt=["value"],gt={class:"lg:basis-1/2 basis-full space-x-3 flex items-center px-6 mb-6"},_t=n("label",{class:"w-1/4 text-red-800 font-semibold"},"อำเภอ",-1),yt=n("option",{value:""},"------เลือก------",-1),xt=["value"],wt={class:"lg:basis-1/2 basis-full space-x-3 flex items-center px-6 mb-6"},Dt=n("label",{class:"w-1/4 text-red-800 font-semibold"},"ตำบล",-1),$t=n("option",{value:""},"------เลือก------",-1),Mt=["value"],St={class:"lg:basis-1/2 basis-full space-x-3 flex items-center px-6 mb-6"},Ct=n("label",{class:"w-1/4 text-red-800 font-semibold"},"รหัสไปรษณีย์",-1),Nt={class:"flex justify-center my-6"},Lt={key:0,class:"rounded-xl mb-10 overflow-auto mx-5"},kt={class:"flex justify-end py-5"},jt={__name:"index",setup(q){const ae=[{field:"specialID",label:"รหัส",width:"10%"},{field:"productName",label:"ชื่อสินค้า",width:"20%"},{field:"productPrice",label:"ราคาสินค้า",width:"10%"},{field:"quantity",label:"ปริมาณสินค้า",width:"10%"},{field:"remain",label:"จํานวนคงเหลือ",width:"10%"},{field:"price",label:"ราคารวมฝาก",width:"10%"},{field:"periodDate",label:"วันที่สิ้นสุดการฝาก",width:"10%"},{field:"supplierFirstName",label:"ชื่อ",width:"20%"},{field:"supplierLastName",label:"สกุล",width:"20%"},{field:"supplierPhone",label:"เบอร์โทร",width:"20%"},{field:"supplierAddress",label:"ที่อยู่",width:"25%"},{field:"supplierSubDistrict",label:"ตำบล",width:"20%"},{field:"supplierDistrict",label:"อำเภอ",width:"20%"},{field:"supplierProvince",label:"จังหวัด",width:"20%"},{field:"supplierZipCode",label:"ไปรษณีย์",width:"10%"}],Y=I([]),D=I({page:1,limit:5,totalPage:0}),T=o=>{D.page=o,N()},w=I({product:[],listProductAll:[],province:[],district:[],subDistrict:[]}),r=I({productID:"",productName:"",typeAction:"",productPrice:"0.00",remain:"",quantity:"0",price:"0.00"}),l=I({id:"",firstName:"",lastName:"",address:"",province:"",district:"",subDistrict:"",zipCode:"",phone:""}),k=()=>{l.value=[],r.value=[]},b=I({status:!1,title:"",body:""}),H=()=>{b.value.status=!1},v=I(!1),U=I(!1),N=async()=>{U.value=!1;const o={page:D.value.page,limit:D.value.limit,sortField:"createdAt",sortType:"DESC",filterModel:{logicOperator:"and",items:[]}};await de.searchDepositImport(o,t=>{if(t.statusCode===200){if(t.data.length>0){U.value=!0;const e=t.data.map(s=>({specialID:s.product.specialID,productName:s.product.name,productPrice:s.product.price,quantity:s.quantity,remain:s.remain,price:s.price,periodDate:Ce(s.periodDate),supplierFirstName:s.supplier.firstName,supplierLastName:s.supplier.lastName,supplierPhone:s.supplier.phone,supplierAddress:s.supplier.address,supplierSubDistrict:s.supplier.subDistric,supplierDistrict:s.supplier.distric,supplierProvince:s.supplier.province,supplierZipCode:s.supplier.zipCode}));Y.value=e,D.value.totalPage=t.metadata.totalPage}else U.value=!1;console.log("response",Y.value)}else{U.value=!1;const s=t.message.map(a=>`<li>${a}</li>`).join("");b.value={status:!0,title:"เกิดข้อผิดพลาด",body:s}}})},O=async()=>{A.commit("setStatusLoading",!0);const o={page:1,limit:10};await De.search(o,t=>{if(t.statusCode===200)w.value.product=t.data.map(e=>({specialID:e.specialID,id:e.id,name:e.name,price:e.price,type:e.type})),w.value.listProductAll=t.data,w.value.product=t.data;else{const s=t.message.map(a=>`<li>${a}</li>`).join("");b.value={status:!0,title:"เกิดข้อผิดพลาด",body:s}}}),w.value.province=ce.map(t=>({label:t.name_th,value:t.id})).sort((t,e)=>t.label.localeCompare(e.label,"th"))};function Z(){const o=new Date().toISOString().substr(0,10);r.value.periodDate=o}const le=o=>{var t;o!==""?(r.value.price=(t=w.value.listProductAll.find(e=>e.id==o).price)==null?void 0:t.toLocaleString(),r.value.productID=o,r.value.price="0.00",r.value.quantity="0",r.value.remain=r.value.quantity,r.value.productName=w.value.name,r.value.typeAction="ฝาก",Z()):(r.value.price="0.00",r.value.remain="0.00",r.value.quantity="0",r.value.periodDate="",r.value.remain=r.value.quantity,r.value.productName="",r.value.typeAction="",Z())},ie=async o=>{A.commit("setStatusLoading",!0);const t={page:1,limit:1,filterModel:{logicOperator:"and",items:[{field:"phone",operator:"equals",value:o}]}};await $e.search(t,e=>{if(e.statusCode===200)e.data.length>0?(console.log("**"),v.value=!1,l.value.id=e.data[0].id,l.value.firstName=e.data[0].firstName,l.value.lastName=e.data[0].lastName,l.value.address=e.data[0].address,l.value.province=e.data[0].province,l.value.district=e.data[0].distric,l.value.subDistrict=e.data[0].subDistric,l.value.zipCode=e.data[0].zipCode,l.value.phone=e.data[0].phone,console.log("formSupplier",l.value)):(b.value={status:!0,title:"เเจ้งเตือน",body:"ไม่พบรายชื่อลูกค้าในระบบ กรุณาเพิ่มลูกค้าใหม่"},v.value=!0,l.value={id:"",firstName:"",lastName:"",address:"",province:"",district:"",subDistrict:"",zipCode:"",phone:o}),A.commit("setStatusLoading",!1);else{const a=e.message.map(u=>`<li>${u}</li>`).join("");b.value={status:!0,title:"เกิดข้อผิดพลาด",body:a},v.value=!0,k(),A.commit("setStatusLoading",!1)}})},ne=async o=>{const t=pe.filter(e=>e.province_id==o);w.value.district=t.map(e=>({label:e.name_th,value:e.id})),l.value.district="",l.value.subDistrict="",l.value.zipCode=""},E=async o=>{const t=oe.filter(e=>e.amphure_id==o);w.value.subDistrict=t.map(e=>({label:e.name_th,value:e.id})),l.value.subDistrict="",l.value.zipCode=""},re=async o=>{const t=oe.find(e=>e.id==o).zip_code;l.value.zipCode=t};function _(o){return o==null||o===""}function P(o){return!_(o.quantity)&&!_(o.price)&&!_(o.productID)&&!_(o.periodDate)&&!_(o.remain)&&!_(o.productID)}function J(o){return!_(o.firstName)&&!_(o.lastName)&&!_(o.address)&&!_(o.subDistrict)&&!_(o.district)&&!_(o.province)&&!_(o.zipCode)&&!_(o.phone)}function F(o){r.value.quantity=o,r.value.remain=o}ue(()=>r.value.quantity,F),ue(()=>r.value.remain,F);const W=async()=>{if(console.log("***onSubmit***"),A.commit("setStatusLoading",!0),!P(r.value)||!J(l.value)){console.log("validateFormProduct",P(r.value)),console.log("validateFormSupplier",J(l.value)),b.value={status:!0,title:"เกิดข้อผิดพลาด",body:"กรุณากรอกข้อมูลให้ครบถ้วน"},A.commit("setStatusLoading",!1);return}else if(r.value.quantity==="0"){b.value={status:!0,title:"เกิดข้อผิดพลาด",body:"จํานวนสินค้าต้องไม่เป็น 0"},A.commit("setStatusLoading",!1);return}else{const o={quantity:r.value.quantity.toString(),price:Number(r.value.price),remain:Number(r.value.remain),periodDate:r.value.periodDate,typeAction:r.value.typeAction,product_id:Number(r.value.productID),firstName:l.value.firstName,lastName:l.value.lastName,address:l.value.address,distric:v.value===!1?l.value.district:pe.find(t=>t.id===l.value.district).name_th,province:v.value===!1?l.value.province:ce.find(t=>t.id===l.value.province).name_th,subDistric:v.value===!1?l.value.subDistrict:oe.find(t=>t.id===l.value.subDistrict).name_th,zipCode:l.value.zipCode.toString(),phone:l.value.phone};await de.createDepositImport(o,t=>{if(t.statusCode===200)b.value={status:!0,title:"เเจ้งเตือน",body:"บันทึกข้อมูลเรียบร้อย"},v.value=!1,k(),N(),O();else{const s=t.message.map(a=>`<li>${a}</li>`).join("");b.value={status:!0,title:"เกิดข้อผิดพลาด",body:s}}}),console.log(o),A.commit("setStatusLoading",!1)}},y=o=>{const t=o.target.value;t.length>10&&(o.target.value=t.slice(0,10),l.value.phone=o.target.value)},p=o=>{const e=o.target.value.replace(/\D/g,"");o.target.value=e,r.value.quantity=e};return be(async()=>{A.commit("setStatusLoading",!0),k(),await N(),await O(),A.commit("setStatusLoading",!1)}),(o,t)=>(m(),h(K,null,[n("div",Ne,[n("div",Le,[n("div",ke,[Ye,n("div",Pe,[n("div",Ae,[Oe,n("div",{onClick:t[0]||(t[0]=e=>k()),class:"flex space-x-2 items-center rounded-full px-3 bg-red-100 cursor-pointer"},Ie)]),ze,n("div",je,[n("div",qe,[Te,x(n("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>r.value.productID=e),class:"h-8 w-full focus:outline-red-400 rounded bg-red-100 px-3",onChange:t[2]||(t[2]=e=>le(e.target.value))},[(m(!0),h(K,null,ee(w.value.product,(e,s)=>(m(),h("option",{key:s,value:e.id},se(e.name),9,He))),128))],544),[[X,r.value.productID]])]),n("div",Fe,[We,x(n("input",{disabled:"",type:"text",class:"h-8 w-full focus:outline-red-400 rounded bg-red-100 px-3","onUpdate:modelValue":t[3]||(t[3]=e=>r.value.typeAction=e)},null,512),[[S,r.value.typeAction]])]),n("div",Be,[Ze,x(n("input",{type:"date",class:"h-8 w-full focus:outline-red-400 rounded bg-red-100 px-3","onUpdate:modelValue":t[4]||(t[4]=e=>r.value.periodDate=e)},null,512),[[S,r.value.periodDate]])]),n("div",Ee,[Je,x(n("input",{type:"number",class:"h-8 w-full focus:outline-red-400 rounded bg-red-100 px-3","onUpdate:modelValue":t[5]||(t[5]=e=>r.value.price=e)},null,512),[[S,r.value.price]]),Qe]),n("div",Ge,[Ke,x(n("input",{class:"h-8 w-3/4 focus:outline-red-400 rounded bg-red-100 px-3",type:"number","onUpdate:modelValue":t[6]||(t[6]=e=>r.value.quantity=e),onInput:t[7]||(t[7]=e=>p(e))},null,544),[[S,r.value.quantity]]),Re]),n("div",Xe,[et,x(n("input",{class:"h-8 w-3/4 focus:outline-red-400 rounded bg-red-100 px-3",type:"number","onUpdate:modelValue":t[8]||(t[8]=e=>r.value.remain=e),disabled:""},null,512),[[S,r.value.remain]]),tt])])])]),n("div",st,[at,lt,n("div",it,[n("div",nt,[rt,x(n("input",{type:"number",placeholder:"กรอกเบอร์โทรศัพท์ (10 หลัก)",pattern:"[0-9]*",class:"h-8 w-full focus:outline-red-400 rounded bg-red-100 px-3","onUpdate:modelValue":t[9]||(t[9]=e=>l.value.phone=e),onInput:t[10]||(t[10]=e=>y(e)),onBlur:t[11]||(t[11]=e=>ie(e.target.value))},null,544),[[S,l.value.phone]])]),n("div",ot,[ut,v.value?x((m(),h("input",{key:0,type:"text",class:"h-8 w-full focus:outline-red-400 rounded bg-red-100 px-3","onUpdate:modelValue":t[12]||(t[12]=e=>l.value.firstName=e)},null,512)),[[S,l.value.firstName]]):x((m(),h("input",{key:1,disabled:"",type:"text",class:"h-8 w-full focus:outline-red-400 rounded bg-red-100 px-3","onUpdate:modelValue":t[13]||(t[13]=e=>l.value.firstName=e)},null,512)),[[S,l.value.firstName]])]),n("div",dt,[ct,v.value?x((m(),h("input",{key:0,type:"text",class:"h-8 w-full focus:outline-red-400 rounded bg-red-100 px-3","onUpdate:modelValue":t[14]||(t[14]=e=>l.value.lastName=e)},null,512)),[[S,l.value.lastName]]):x((m(),h("input",{key:1,disabled:"",type:"text",class:"h-8 w-full focus:outline-red-400 rounded bg-red-100 px-3","onUpdate:modelValue":t[15]||(t[15]=e=>l.value.lastName=e)},null,512)),[[S,l.value.lastName]])]),n("div",pt,[ft,v.value?x((m(),h("input",{key:0,type:"text",class:"h-8 w-full focus:outline-red-400 rounded bg-red-100 px-3","onUpdate:modelValue":t[16]||(t[16]=e=>l.value.address=e)},null,512)),[[S,l.value.address]]):x((m(),h("input",{key:1,disabled:"",type:"text",class:"h-8 w-full focus:outline-red-400 rounded bg-red-100 px-3","onUpdate:modelValue":t[17]||(t[17]=e=>l.value.address=e)},null,512)),[[S,l.value.address]])]),n("div",vt,[mt,v.value?x((m(),h("select",{key:0,"onUpdate:modelValue":t[18]||(t[18]=e=>l.value.province=e),onChange:t[19]||(t[19]=e=>ne(e.target.value)),class:"h-8 w-full focus:outline-red-400 rounded bg-red-100 px-3"},[ht,(m(!0),h(K,null,ee(w.value.province,(e,s)=>(m(),h("option",{key:s,value:e.value},se(e.label),9,bt))),128))],544)),[[X,l.value.province]]):x((m(),h("input",{key:1,disabled:"",type:"text",class:"h-8 w-full focus:outline-red-400 rounded bg-red-100 px-3","onUpdate:modelValue":t[20]||(t[20]=e=>l.value.province=e)},null,512)),[[S,l.value.province]])]),n("div",gt,[_t,v.value?x((m(),h("select",{key:0,"onUpdate:modelValue":t[21]||(t[21]=e=>l.value.district=e),onChange:t[22]||(t[22]=e=>E(e.target.value)),class:"h-8 w-full focus:outline-red-400 rounded bg-red-100 px-3"},[yt,(m(!0),h(K,null,ee(w.value.district,(e,s)=>(m(),h("option",{key:s,value:e.value},se(e.label),9,xt))),128))],544)),[[X,l.value.district]]):x((m(),h("input",{key:1,disabled:"",type:"text",class:"h-8 w-full focus:outline-red-400 rounded bg-red-100 px-3","onUpdate:modelValue":t[23]||(t[23]=e=>l.value.district=e)},null,512)),[[S,l.value.district]])]),n("div",wt,[Dt,v.value?x((m(),h("select",{key:0,"onUpdate:modelValue":t[24]||(t[24]=e=>l.value.subDistrict=e),onChange:t[25]||(t[25]=e=>re(e.target.value)),class:"h-8 w-full focus:outline-red-400 rounded bg-red-100 px-3"},[$t,(m(!0),h(K,null,ee(w.value.subDistrict,(e,s)=>(m(),h("option",{key:s,value:e.value},se(e.label),9,Mt))),128))],544)),[[X,l.value.subDistrict]]):x((m(),h("input",{key:1,disabled:"",type:"text",class:"h-8 w-full focus:outline-red-400 rounded bg-red-100 px-3","onUpdate:modelValue":t[26]||(t[26]=e=>l.value.subDistrict=e)},null,512)),[[S,l.value.subDistrict]])]),n("div",St,[Ct,x(n("input",{disabled:"",type:"text",class:"h-8 w-full focus:outline-red-400 rounded bg-red-100 px-3","onUpdate:modelValue":t[27]||(t[27]=e=>l.value.zipCode=e)},null,512),[[S,l.value.zipCode]])])])]),n("div",Nt,[te(we,{label:"บันทึกข้อมูล",onClick:W})])])]),U.value?(m(),h("div",Lt,[te(ye,{columns:ae,rows:Y.value},null,8,["rows"]),n("div",kt,[te(xe,{currentPage:D.value.page,"onUpdate:currentPage":[t[28]||(t[28]=e=>D.value.page=e),T],totalPages:D.value.totalPage,limit:D.value.limit},null,8,["currentPage","totalPages","limit"])])])):ge("",!0),te(_e,{titleMessage:b.value.title,bodyMessage:b.value.body,status:b.value.status,onCloseAlertModal:H},null,8,["titleMessage","bodyMessage","status"])],64))}};export{jt as default};
